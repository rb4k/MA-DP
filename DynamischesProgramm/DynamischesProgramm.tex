% !TEX encoding = UTF-8 Unicode
\chapter{Ein exaktes Lösungsverfahren zur Auftragsannahme- und Lagerhaltungsentscheidung bei auftragsbezogenen Instandhaltungsprozessen}\label{HauptteilDP}
\markboth{5 Ein exaktes Lösungsverfahren zur Auftragsannahme- und Lagerhaltungsentscheidung}{}
\setcounter{footnote}{7}

\section{Mathematische Formulierung eines Modells zur Auftragsannahme- und Lagerhaltungsentscheidung}\label{Umformung}

%\subsection{Beachtung von Produktanfragen für nachfolgende Buchungsabschnitte}

% Lagerhaltungsparameter y
Die Gleichung \eqref{DP} wird bei Modellerweiterung der Auftragsannahme- und Lagerhaltungsentscheidung um den Parameter des Lagerbestands $y_{h}$ erweitert. In Bezug des Ausgangsproblems der Lagerhaltungsentscheidung ist dieser Schritt der Modellerweiterung nötig, damit ein Parameter für bereits reparierte Produkte im Modell vorhanden ist. Es existiert für jede Ressource $h\in\mathcal{H}$ ein möglicher Lagerbestand $y_h$. Die Obergrenze eines jeden Lagerbestands einer Ressource $h\in\mathcal{H}$ wird als Parameter $y_{h}^{max}$ beschrieben. Die einzelnen Lagerbestände können als Vektor $\textbf{y}$ zusammengefasst werden. %In der Modellerweiterung wird davon ausgegangen, dass Kapazitäten $c_{h}$ einer Ressource $h$ verwendet werden können, damit der Lagerbestand an Ressourcen $y_{h}$ erhöht wird. Es handelt sich damit um eine Art der Vorarbeit der Leistung. Die einzelnen Bestandteile des Produkts werden auf Lager gelegt, damit diese zu einem späteren Zeitpunkt Verwendung finden. In dieser Modellerweiterung wird davon ausgegangen, dass ein komplettes Bündel des Produkts $j$ auf Lager gelegt wird.


% Grundaufbau des Modells
Die Modellerweiterung soll es ermöglichen ertragsarme Anfragen $j^{-}$ nach auftragsbezogenen Instandhaltungsprozessen abzulehnen und eine Erhöhung des Lagerbestands $y_{h}$ über den Parameter $a_{hj}$ zu ermöglichen, sofern diese Anfragen relevante Ressourcenkapazitäten $c_{h}$ für im weiteren Verlauf des Buchungshorizonts $T$ eintreffende ertragreichere Anfragen $j^{+}$ reduzieren. Weiter ist eine Annahme von Anfragen $j$ nach Instandhaltungsprozessen über den Lagerparameter $y_{h}$ möglich, indem anstelle der Kapazitäts- eine Lagerreduktion erfolgt. Der Parameter $y_{h}$ wird bei der Annahme via Lagerbestand um den Parameter $a_{hj}$ reduziert. Damit fungiert in diesem Modell der Parameters $a_{hj}$ als Bestandsveränderung der Kapazitäten oder der Lagerbestände. 

% Leistungsperioden
In der Modellerweiterung werden Anfragen nach Produkten betrachtet, die für bestimmte Leistungserstellungszeitpunkte vorgesehen sind. Ein Leistungserstellungszeitpunkt wird durch den Parameter $\hat{t}$ definiert. Damit existiert für eine jede Ressourcen $h$ eine Kapazität $c_h^{\hat t}$ und ein Lagerbestand $y_h^{\hat t}$ für einen jeden Leistungserstellungszeitpunkt $\hat{t}$. Damit wird den Parametern für den Kapazitäts- und Lagerbestand der hochgestellte Index zum zugehörigen Buchungsabschnitt $\hat{t}$ ergänzt. Die Menge aller Leistungserstellungszeitpunkte wird mit dem Parameter $\hat T$ abgebildet. Zur Vereinfachung des Modells wird nur eine einzelne Ressource $h$ über den gesamten Buchungshorizont betrachtet. Der jeweilige Eintrag im Vektor $\textbf{c}^{\hat t}$ entspricht somit der Kapazität $c_h^{\hat t}$ der Ressource $h=1$ zum Leisungserstellungszeitpunkt $\hat{t}$.

% Kapazitätsverbrauch
Der Kapazitätsverbrauch $a_{hj}^{\hat t}$ einer Produktanfrage $j$ beschreibt mit dem jeweiligen Eintrag damit den Zeitpunkt der Erfüllung der Anfrage und dem daraus resultierenden Verbrauch der Ressource $h=1$ . Sei $\tilde{j}$ eine Anfrage nach einem Produkt für diese Modellerweiterung, dann beschreibt der Parameter $\textbf{a}_{\tilde{j}}^{\hat t}=(0,1,0)$, dass die Erfüllung der Anfrage für den Leistungserstellungszeitpunkt $\hat{t}=2$ vorgesehen ist. Es gilt die Annahme, dass die Leistungserstellungszeitpunkte $\hat t\in \hat T$ sich gleichmäßig über den gesamten Buchungshorizont $T$ aufteilen. Die bis zur Leistungserstellung benötigten Perioden werden durch Division des Buchungshorizonts $T$ und der Anzahl an Leisungszeitpunkten $\hat t$ ermittelt. Dabei gilt die Bedingung, dass der Buchungshorizont $T$ durch die Anzahl der Leistungszeitpunkte $\hat t$ ganzzahlig teilbar sein muss. Bspw. erfolgt für eine Anfrage $\tilde j$ mit einem Kapazitätsverbrauch $\textbf{a}^{\hat t}_{\tilde{j}}=(0,1,0)$ für einen Buchungshorizont in Länge von $T=15$ eine Leistungserstellung der Anfrage $j$ mit Ablauf der sechsten Periode $t$. Damit wird ab der Periode $t=5$ eine neue Leistungserstellung betrachtet.

% Vorzeitiges Buchen
Das Modell erlaubt durch das Betrachten der Leistungserstellungszeitpunkte $\hat t \in \hat T$ die vorzeitige Inanspruchnahme von Kapazitäten $c_{h}^{\hat t}$ für Produktanfragen $j$ für nachfolgende Leistungserstellungszeitpunkte $\hat{t}$, was die Annahme der Instandhaltungsauftrags oder das Instandsetzen von Ressourcen entspricht. Dies resultiert aus der Tatsache, dass die Bestandsveränderung $\textbf{a}_j^{\hat t}$ einer Anfrage $j$ bereits vor des eigentlichen Leistungserstellungszeitpunkts $\hat t$ den Zugriff auf die Kapazität $\textbf{c}^{\hat t}$ oder den Lagerbestand $\textbf{y}^{\hat t}$ erlaubt. Jedoch darf kein Zugriff des Parameters $\textbf{a}_j^{\hat t}$ nach Überschreitung des Leistungserstellungszeitpunkts $\hat t$ auf die jeweiligen Bestände $\textbf{c}^{\hat t}$ bzw. $\textbf{y}^{\hat t}$ erfolgen. Anders formuliert bedeutet dies, dass nicht beanspruchte Kapazitäten $c_{h}^{\hat t}$ für vergangene Leistungserstellungszeitpunkte $\hat t$ nicht mehr für weitere Auftragsannahme verwendet werden dürfen. Diese Eigenschaft wird mit der Wahrscheinlichkeit $p_j(t)$ für die jeweiligen Anfragen $j\in\mathcal{J}$ gesteuert. Dabei ist der Zeitpunkt an dem die erste Anfrage nach einem Produkt $j$ eintrifft unerheblich. Mit dieser Modellerweiterung ist eine umfassendere Betrachtung der Auftragsannahme in der Auftragsfertigung als im Vergleich zum Grundmodell \ref{DP} aus Kapitel \ref{KapitelDP} möglich.\footnote{Vgl. \cite{lars}.} Abbildung \ref{LP2} zeigt die Rahmenbedingungen der Modellerweiterung als grafische Darstellung. Dabei soll der Zusammenhang von Buchungsperioden und Leistungserstellungszeitpunkte verdeutlicht werden. Ebenfalls zeigt die Abbildung beispielhaft welche Produktanfragen in welchen Zeiträumen eintreffen können.

\begin{figure}[h!]
  \begin{center}
    \includegraphics[width=130mm]{Bilder/Leistungsperioden2.pdf}
    \caption{Zusammenhand von Buchungsperioden und den Leistungserstellungszeitpunkten}  \label{LP2}
    {\footnotesize \textbf{In Anlehnung an:} \cite{lars}} 
  \end{center}
\end{figure}


% Neuer Terme
Bei der Modellformulierung erfolgt die Anpassung der \textit{Bellman'schen Funktionsgleichung}  \eqref{DP} um die Lagerentnahme in Form des Terms $r_{j} + V(\textbf{c}^{\hat t}, \textbf{y}^{\hat t}-\textbf{a}_j^{\hat t}, t-1)$. Der Term beschreibt die Annahme mittels des Lagerbestands. Damit ist es dem Unternehmen möglich entweder die Kapazität oder den Lagerbestand zur Annahme einer Anfrage eines Instandhaltungsprozess in Anspruch zu nehmen. Die gewollte Ablehnung einer Anfrage $j$ zur Produktion eines Lagerbestand $y_h^{\hat t}$ wird mit dem Term $V(\textbf{c}^{\hat t}-\textbf{a}^{\hat t}_j, \textbf{y}^{\hat t}+Y(\textbf{a}^{\hat t}_j), t-1)$ dargestellt. Für das Modell gilt, dass eine Ressource und eine Einheit des Lagerbestands im gleichen Verhältnis substituierbar ist. Eine Lagerproduktion in der Instandhaltung kann z. B. die vorherige Aufarbeitung von Ressourcen sein, damit für spätere Instandhaltungsaufträge anstelle der Instandsetzung ein Austausch des zu reparierenden Produkts erfolgt.

Durch diese Erweiterung ist es dem Modell gestattet, eine Entscheidung über die Ablehnung einer Anfrage $j$ zu berücksichtigen, wobei mit dieser Ablehnung eine Reduktion der Ressourcenkapazität $\textbf{c}^{\hat t}$ und die Erhöhung des Lagerbestand $\textbf{y}^{\hat t}$ um jeweils des Parameters $\textbf{a}_j^{\hat t}$ einhergeht. Die Erhöhung des Lagerbestands $\textbf{y}^{\hat t}$ einer jeden Ressource $h$ erfolgt über den gesamten Buchungshorizont und ist für den nachfolgenden Leistungserstellungszeitpunkt $\hat t$ verfügbar. %Sei der aktuelle Lagerbestands $\textbf{y}^{\hat t}=(0,0,0)$ über alle Leistungserstellungszeitpunkte $\hat t$. Dann erfolgt durch die Annahme einer Anfrage $j$ mit der Bestandsveränderung $\textbf{a}_j^{\hat t}=(0,1,0)$ eine Erhöhung des Lagerbestand auf $\textbf{y}^{\hat t}=(0,1,1)$, da die Leistung erst nach Erstellung in $\hat{t}=1$ verfügbar ist.

Zur Ermittlung des Lagerbestands aufgrund der Annahme der Aufarbeitung von Ressourcen ist die Hilfsfunktion $Y(\textbf{a}_j^{\hat t})$ erforderlich, die den Parameter für den Kapazitätsverbrauch $\textbf{a}_j^{\hat t}$ über alle nachfolgenden Leistungserstellungszeitpunkten kumuliert.\footnote{Vgl. \cite{lars}.} Als Beispiel wird der Kapazitätsverbrauch $\textbf{a}_j^{\hat t}=(0,1,1,0)$ betrachtet. Ein Auftrag $j$ mit einem Verbrauch des vorher aufgeführten Parameters $\textbf{a}_j^{\hat t}$ zeigt eine Leistungserstellung über mehrere Perioden auf. Die Hilfsfunktion zur Ermittlung der Lagerbestandsveränderung berechnet damit eine Lageraufstockung in Höhe des Vektors $Y(\textbf{a}_j^{\hat t})=(0,0,1,2)$. Es muss beachtet werden, dass ein Auftrag $j$ mit einem Kapazitätsverbrauch von $\textbf{a}_j=(0,0,1,2)$ eine Lagererhöhung $Y(\textbf{a}_j)=(0,0,0,1)$ verursacht. Diese Erhöhung liegt außerhalb des Betrachtungszeitraums. Damit kann zwar ein Teil der Bestandsveränderung für den aktuellen Betrachtungszeitraum genutzt werden, aber der andere Teil geht in dieser Modellformulierung verloren. Eine zusätzliche Betrachtung einer Beanspruchung von Beständen außerhalb des Betrachtungszeitraums (Perioden $t\le0$) in Form von z. B. Lagerentnahmen findet in dieser Arbeit keine Anwendung. 

Die mathematische Formulierung der \textit{Bellman'schen Funktionsgleichung} für Auf\-trags\-annahme- und Lagerhaltungsentscheidungen bei auftragsbezogenen Instandhaltungsprozessen wird damit wie folgt beschrieben:
\begin{equation}\label{time}
\begin{alignat*}{2}
V(\textbf{c}^{\hat{t}}, \textbf{y}^{\hat{t}}, t) =\;& \sum_{j \in \mathcal{J}}p_{j}(t)\max[V(\textbf{c}^{\hat{t}}, \textbf{y}^{\hat{t}}, t-1), r_{j} + V(\textbf{c}^{\hat{t}}-\textbf{a}^{\hat t}_j, \textbf{y}^{\hat{t}}, t-1),\\
& r_{j} + V(\textbf{c}^{\hat{t}}, \textbf{y}^{\hat{t}}-\textbf{a}_j^{\hat t}, t-1), V(\textbf{c}^{\hat{t}}-\textbf{a}_j^{\hat t}, \textbf{y}^{\hat{t}}+Y(\textbf{a}_j^{\hat t}), t-1)]\\
& + p_{0}(t)\max_{j\in \mathcal{J},\atop p_j(t)>0}[V(\textbf{c}^{\hat{t}}, \textbf{y}^{\hat{t}}, t-1), V(\textbf{c}^{\hat{t}}-\textbf{a}^{\hat t}_j, \textbf{y}^{\hat{t}}+Y(\textbf{a}_j^{\hat t}), t-1)]
\end{alignat*}
\end{equation}

Die Gleichung \eqref{time} zeigt im ersten Term, welche Entscheidungen bzgl. der optimalen Politik möglich sind, sofern eine Anfrage $j\in\mathcal J$ in Abhängigkeit der Wahrscheinlichkeitsverteilung $p_j(t)$ eintrifft. Es wird das Maximum über die Entscheidungen \glqq Ablehnung des Auftrags{\grqq}, \glqq Annahme via Ressourcenkapazität{\grqq}, \glqq Annahme via Lagerbestand{\grqq} sowie \glqq Ablehnung und Lagerproduktion unter Verwändung der Ressourcen{\grqq}. Damit geht aus der Gleichung \eqref{time} hervor, dass es zu jedem Erwartungswert, somit für jedes Teilproblem des Netzwerks, für eine jede Anfrage $j$ die vier Optionen bzw. Entscheidungen existieren. Es gibt damit für eine jede Produktanfrage $j$ im gesamten Netzwerk einen Wert, der die optimale Politik beim Eintreffen einer Anfrage beschreibt. Diese Option der optimalen Politik wird als Parameter $d_j({\textbf{c}^{\hat t},\textbf{y}^{\hat t},t})\forall j\in\mathcal{J}$ definiert. Dieser Parameter existiert für jedes Produkt und ist abhängig des Systemzustands. Ein Systemzustands wird durch die verbleibende Kapazität $\textbf{c}^{\hat t}$ und durch den Lagerbestand $\textbf{y}^{\hat t}$ zur Periode $t$ beschrieben. Der Parameter kann ebenfalls als Vektor $\textbf{d}({\textbf{c}^{\hat t},\textbf{y}^{\hat t},t})$ interpretiert werden und zeigt damit für ein Teilproblem des Netzwerks die optimale Politik über alle möglichen Anfragen. Inhalt des Vektors ist der jeweilige Index der optimalen Option bzw. Politik. Es nimmt den Wert $d_j({\textbf{c}^{\hat t},\textbf{y}^{\hat t},t})=1$ an, sofern die Option der Auftragsannahme via Kapazität den höchsten Erwartungswert liefert und den Wert $d_j({\textbf{c}^{\hat t},\textbf{y}^{\hat t},t})=2$, wenn die Auftragsannahme via Lagerbestand der optimalen Politik entspricht. Sofern die Ablehnung des Auftrags erfolgen soll, aber inkl. der Entscheidung der Lagerproduktion, dann nimmt der Parameter $d_j({\textbf{c}^{\hat t},\textbf{y}^{\hat t},t})$ den Wert $3$ an. Sofern die optimale Politik die Ablehnung aller Anfrage ist, nimmt der Parameter den Wert $d_j({\textbf{c}^{\hat t},\textbf{y}^{\hat t},t})=0$ an.

% Alte und neue Grenzbedingungen
Für die verschiedenen Optionen existieren unterschiedliche $OC_{j}$, wie aus der Gleichung \eqref{time} zu erkennen ist. Damit trägt der Parameter $OC_{j}$ den Superskript $d$ für die jeweilig möglichen Optionen aufgrund der Modellformulierung. In dieser Modellerweiterung existieren vier unterschiedliche Optionen, die den möglichen Ausprägungen der optimalen Politiken des Parameters $d_{j}(\textbf{c}^{\hat t},\textbf{y}^{\hat t},t)$ entsprechen. Sofern die Entscheidung über die verschiedenen möglichen Optionen im betrachteten Systemzustand gleichwertig sind, welches abhängig von den Parametern $r_{j}$ und $OC_j^{d}$ ist, wird die Annahme einer Anfrage über die Ressourcenkapazität bevorzugt. Anschließend erfolgt die Bevorzugung der Annahme einer Anfrage via Lagerbestand, falls die anderweitigen Optionen einen gleichwertigen Wert aufweisen.

Es gelten die Grenzbedingungen \eqref{GB1} sowie \eqref{GB2} aus Kapitel \ref{KapitelDP} und bzgl. der optimalen Politik zur Annahme von Anfragen nach Produkt $j$ gilt folgende Annahme:
\begin{equation}\label{GB3}
     d_{j}({\textbf{c}^{\hat t},\textbf{y}^{\hat t}, t}):=\left\{\begin{array}{llll}
     1, & \text{für } r_{j} - OC_{j}^{1} \ge r_{j} - OC_{j}^{2}\\
         2, & \text{für } r_{j} - OC_{j}^{2} \ge OC_{j}^{3}\\
         3, & OC_{j}^{3} > 0\\
         0, & \text{sonst}\end{array}\right. .
\end{equation}

Die \textit{Bellman'schen Funktionsgleichung} \eqref{time} zeigt ebenfalls den Term an, sofern keine Anfragen eintreffen. Bei der Auftragsannahme von Kundenaufträgen unter Berücksichtigung von Lagerhaltungsentscheidung muss beachtet werden, dass auch Entscheidungsalternativen beim Einreffen keiner Produktanfragen $j\in\mathcal{J} $ bestehen. Sofern keine Anfragen eintreffen, gibt es die Optionen bzgl. einer Aufarbeitung von Ressourcen $h\in\mathcal{H}$ über alle möglichen Produktanfragen $j\in\mathcal{J}$. Damit existiert auch eine optimale Politik, sofern keine Anfragen nach den Produkten $j$ eintreffen. Für diese optimale Politik wird der Parameter $d_0({\textbf{c}^{\hat t},\textbf{y}^{\hat t},t})$ verwendet. Es hat die gleiche Abhängigkeit wie der Parameter für die optimale Politik bei Auftragseingang ($d_j({\textbf{c}^{\hat t},\textbf{y}^{\hat t},t})$). Er zeigt jedoch nicht einen Index über die optimale Entscheidung, sonder er zeigt den Index der Produktanfrage $j$, sofern eine Lagerproduktion durch Aufarbeitung von Ressourcen $h\in\mathcal{H}$ erfolgen soll, und sonst nimmt er den Wert $0$ an, wenn keine Lagerproduktion bzw. die Aufarbeitung erfolgen soll. Damit kann der Parameter wie folgt definiert werden:
\begin{equation}\label{GB4}
     d_{0}({\textbf{c}^{\hat t},\textbf{y}^{\hat t}, t}):=\left\{\begin{array}{ll}
         j, & \text{für }\max_{\substack{j\in \mathcal{J},\\ p_j(t)>0}} OC_{j}^{3}\\
         0, & \text{sonst}\end{array}\right. .
\end{equation}

Dabei wird für den Parameter $d_0({\textbf{c}^{\hat t},\textbf{y}^{\hat t},t})$ zur Vereinfachung des Modells angenommen, dass nur dann eine Lagererhöhung erfolgen kann, sofern Anfragen nach Produkten $j\in\mathcal J$ möglich sind ($p_j(t)>0$). 

Die Gleichung \eqref{time} kann analog der Gleichung \eqref{DP} umgeformt werden:
%Umformung
\begin{equation}\label{time2}
\begin{alignat*}{2}
V(\textbf{c}^{\hat{t}}, \textbf{y}^{\hat{t}}, t) = \;& \sum_{j \in \mathcal{J}}p_{j}(t)V(\textbf{c}^{\hat{t}}, \textbf{y}^{\hat{t}}, t-1) + \sum_{j \in \mathcal{J}}p_{j}(t)\max[0, \\
& r_{j} - V(\textbf{c}^{\hat{t}}, \textbf{y}^{\hat{t}}, t-1)+ V(\textbf{c}^{\hat{t}}-\textbf{a}^{\hat t}_j, \textbf{y}^{\hat{t}}, t-1), \\
& r_{j} - V(\textbf{c}^{\hat{t}}, \textbf{y}^{\hat{t}}, t-1) + V(\textbf{c}^{\hat{t}}, \textbf{y}^{\hat{t}}-\textbf{a}^{\hat t}_j, t-1),\\
& V(\textbf{c}^{\hat{t}}-\textbf{a}_j^{\hat t}, \textbf{y}^{\hat{t}}+Y(\textbf{a}_{j}^{\hat t}), t-1) - V(\textbf{c}^{\hat{t}}, \textbf{y}^{\hat{t}}, t-1) ]\\
&+p_{0}(t)V(\textbf{c}^{\hat{t}}, \textbf{y}^{\hat{t}}, t-1)\\
& + p_{0}(t)\max_{j\in \mathcal{J},\atop p_j(t)>0}[0, V(\textbf{c}^{\hat{t}}-\textbf{a}_j^{\hat t}, \textbf{y}^{\hat{t}}+Y(\textbf{a}_j^{\hat t}), t-1)]\\[10pt]
= \;& V(\textbf{c}^{\hat{t}}, \textbf{y}^{\hat{t}}, t-1) + \sum_{j \in \mathcal{J}}p_{j}(t)\max[0, \\
& r_{j} - V(\textbf{c}^{\hat{t}}, \textbf{y}^{\hat{t}}, t-1)+ V(\textbf{c}^{\hat{t}}-\textbf{a}_j^{\hat t}, \textbf{y}^{\hat{t}}, t-1), \\
& r_{j} - V(\textbf{c}^{\hat{t}}, \textbf{y}^{\hat{t}}, t-1) + V(\textbf{c}^{\hat{t}}, \textbf{y}^{\hat{t}}-\textbf{a}_j^{\hat t}, t-1),\\
& V(\textbf{c}^{\hat{t}}-\textbf{a}_j^{\hat t}, \textbf{y}^{\hat{t}}+Y(\textbf{a}_{j}^{\hat t}), t-1) - V(\textbf{c}^{\hat{t}}, \textbf{y}^{\hat{t}}, t-1) ]\\
& + p_{0}(t)\max_{j\in \mathcal{J},\atop p_j(t)>0}[0, V(\textbf{c}^{\hat{t}}-\textbf{a}^{\hat t}_j, \textbf{y}^{\hat{t}}+Y(\textbf{a}^{\hat t}_j), t-1)]
\end{alignat*}
\end{equation}

%Aufbauen auf den vorhergehenden Erweiterung erfolgt die Betrachtung des Modells um eine andere Möglichkeit der Lagerhaltungsentscheidung.
Die Beschreibung der Funktionsweise der Modellerweiterung wird anhand nachfolgendem Beispiels getätigt:

\begin{center}
$j = \{1, 2, 3\}, \; h = \{1\}, \; r_{1} = 100, \; r_{2} = 200, \; r_{3} = 5000,$ \\
$\text{Startperiode } t=3, \; \text{Anzahl Leistungserstellungen } \hat{T}= 3$,
\end{center}
\[
    \textbf{c}^{\hat{t}}=\begin{pmatrix} 1\\ 1\\ 1  \end{pmatrix}, \;
    \textbf{a}^{\hat t}_{1}=\begin{pmatrix} 1\\ 0\\ 0  \end{pmatrix}, \;
     \textbf{a}^{\hat t}_{2}=\begin{pmatrix} 0\\ 1\\ 0  \end{pmatrix}, \;
       \textbf{a}^{\hat t}_{3}=\begin{pmatrix} 0\\ 0\\ 2  \end{pmatrix}, \;
            p_{j}(t)=
       \begin{pmatrix}
       0.3 & 0 & 0 \\
0.3 & 0.3 & 0 \\
0.3 & 0.3 & 0.3
\end{pmatrix}, 
  \]
  \[
    \textbf{y}= \begin{pmatrix} 0\\ 0\\ 0  \end{pmatrix}, \;
    \textbf{y}^{max}=\begin{pmatrix} 2\\ 2\\ 2  \end{pmatrix}
      \]

Bei dem Beispiel wird ein Netzwerk mit drei Produkte $j\in\mathcal{J}$ betrachtet. Es existieren drei Leistungserstellungszeitpunkte $\hat t$ für eine Ressource $h\in\mathcal{H}$. Die Produkte generieren einen Ertrag in Höhe von $r_1=100, r_2=200$ und $r_3=5000$. Die Kapazitäten für die Ressourcen betragen $\textbf{c}^{\hat t}=(1,1,1)$ und die Bestandsveränderungen für die Anfragen betragen $\textbf{a}^{\hat t}_1=(1,0,0),\; \textbf{a}^{\hat t}_2=(0,1,0)$ sowie $\textbf{a}^{\hat t}_3=(0,0,2)$. Der Buchungshorizont beträgt $T=3$. Es existiert kein Lagerbestand $\textbf{y}^{\hat t}$ und es kann nur ein maximaler Lagerbestand $\textbf{y}^{\hat t, max}=(2, 2, 2)$ zu jeder Leistungserstellung aufgebaut werden. In diesem Beispiel sind nicht alle Produktanfragen $j\in\mathcal{J}$ zu jedem Zeitpunkt $t\in T$ möglich. Dies zeigt die Matrix $p_{j}(t)$ mit den Eintrittswahrscheinlichkeiten für jedes Produkt $j$ zum jeweiligen Zeitpunkt $t$. Für das Produkt $j=1$ treffen Anfragen zu den Zeitpunkten $t\in T$ mit den Wahrscheinlichkeiten $p_{1}(t)=(0.3, 0, 0)$ ein. Für die Produkte $j=2$ und $j=3$ betragen die Wahrscheinlichkeiten $p_{2}(t)=(0.3, 0.3, 0)$ bzw. $p_{3}(t)=(0.3, 0.3, 0.3)$. Bei den Wahrscheinlichkeiten $p_j(t)$ der Produktanfrage $j$ zum Zeitpunkt $t$ muss beachtet werden, dass der Buchungshorizont rückwärts verläuft. Abbildung \ref{B9} zeigt für das Beispiel die möglichen Systemzustände mit allen Übergängen. Dabei wird ein Systemzustand im Netzwerk als Zahlenfolge $[c^{\hat t=1}_1\;c^{\hat t=2}_1\;c_1^{\hat t=3}\;y_1^{\hat t=1}\;y_1^{\hat t=2}\;y_1^{\hat t=3}\;t]$ beschrieben.

\begin{figure}[h!]
  \begin{center}
    \includegraphics[width=200mm, angle=90]{Bilder/Beispiel9.pdf}
    \caption{Darstellung der Systemzustände des Netzwerk RM unter Beachtung der Möglichkeit der Auftragsannahme- und Lagerhaltungsentscheidung}  \label{B9}
    {\footnotesize \textbf{Legende:} Die Zahlen stehen für den Auftrag $j$, AA='Auftragsannahme', LE='Lagerentnahme', LP='Lagerproduktion', KA='Kein Auftrag', $\cdots$='Anfrage ablehnen'} 
  \end{center}
\end{figure}

Wie in der Abbildung \ref{B9} zu erkennen ist, wäre die optimale Politik $d_{j}({\textbf{c},\textbf{y}, t})$ im Systemzustand $[1\;1\;1\;0\;0\;0\;3]$ eine Anfrage nach einem Produkt $j=1$ abzulehnen und eine Bestandsveränderung des Lagers zu bewilligen (Lagerproduktion) sowie die Annahme der Produktanfrage $j$ anhand der Kapazitäten. Eine Anfrage $j=3$ kann in diesem Systemzustand nicht akzeptiert werden, da nicht genügend Kapazität vorhanden ist und daher wird der Übergang in einem Systemzustand mit einer negativen Ressourcenkapazität nicht dargestellt. Sofern eine Anfrage $j=1$ im Systemzustand $[1\;1\;1\;0\;0\;0\;3]$ eintrifft, erreicht das Netzwerk den Systemzustand $[0\;1\;1\;0\;1\;1\;2]$. Wie zu erkennen, ist die Kapazität $c_1^{\hat t=1}$ auf $0$ reduziert und nach dem Leistungserstellungszeitpunkt $\hat t = 1$ ist ein Ressourcenbestand auf dem Lagerhaltungsparameter $\textbf y^{\hat t}$ verfügbar. Zum Systemzustand $[0\;1\;1\;0\;1\;1\;2]$ ist aufgrund der Wahrscheinlichkeitsverteilung $p_j(t)$ keine Anfrage nach Produkt $j=2$ mehr möglich und ebenfalls ist eine Annahme einer Anfrage nach Produkt $j=3$ aufgrund der Kapazitätsbestände ausgeschlossen. In diesem Systemzustand ist, sofern die Anfrage eintrifft, das Ablehnen einer Produktanfrage $j=2$ und die aus der Ablehnung mögliche Lagerproduktion alleiniges Bestandteil der optimalen Politik. Aufgrund einer solchen Entscheidung erfolgt der Übergang in den Systemzustand $[0\;0\;1\;0\;1\;2\;1]$. Wie die Zahlenfolge $[0\;0\;1\;0\;1\;2\;1]$ des Systemzustands andeutet, ist anhand des Lagerhaltungsparameters $\textbf y^{\hat t}=(0,1,2)$ erstmalig eine Annahme der Produktanfrage $j=3$ möglich. Sofern diese aufgrund der Wahrscheinlichkeitsverteilung $p_j(t)$ einzig mögliche Anfrage eintrifft, ist die optimale Politik des Netzwerks die Annahme der Anfrage $j=3$ anhand der Entscheidung der Lagerentnahme ($d_{3}((0,0,1)^{\textnormal T},(0,1,2)^{\textnormal T}, 1)=2$). Erfolgt eine solche Reihenfolge des Eintreffens der Auftrage, dass würde ein Unternehmen unter Einhaltung der optimalen Politik einen Gesamtdeckungsbeitrag in Höhe von $5000$ GE erzielen.

Sofern im Ausgangssystemzustand $[1\;1\;1\;0\;0\;0\;3]$ eine Anfrage nach einem Produkt $j=2$ eintrifft, ist die optimale Politik die Annahme der Anfrage über die Ressourcenkapazitität $\textbf{c}^{\hat t}$. Aufgrund dieser Entscheidung ist ein Gesamtdeckungsbeitrag in Höhe von $200$ GE erzielt. Eine Entscheidung über die Ablehnung und Aufarbeitung von Ressourcen (Lagerproduktion) unter diesen Parametergegebenheiten hätte in Bezug der Zielsetzung der Maximierung des Gesamtdeckungsbeitrags keinen Nutzen. Wie in der Abbildung \ref{B9} zu erkennen ist, würde eine Lagerproduktion zwar den Bestand an Ressourcen auf Lager erhöhen, jedoch wäre im weiteren Verlauf keine Annahme einer anderen Produktanfrage $j\in\mathcal M$ möglich. Sofern ein Unternehmen sich gegen die optimale Politik entscheidet, würde kein Ertrag im weiteren Verlauf des Netzwerks generiert.

Trifft im Ausgangssystemzustand $[1\;1\;1\;0\;0\;0\;3]$ keine Anfrage $j$ ein, dann ist die optimale Politik $d_{0}({\textbf{c}^{\hat t},\textbf{y}^{\hat t}, t})=1$. D. h. sofern keine Anfragen nach einem Produkt $j$ eintreffen, wäre es die optimale Politik des Unternehmens die Bestandsveränderung $\textbf{a}_j$ der Produktanfrage $j=1$ zu verwenden, damit der Lagerbestand $\textbf{y}^{\hat t}$ sich ab der Leistungsperiode $\hat{t}=2$ um eine Einheit erhöht. Anders formuliert, würde das Unternehme die vorhandene Kapazität nicht verfallen lassen und eine Lagerproduktion veranlassen. Die weitere optimale Politik für dieses Netzwerk ist, sofern keine Produktanfragen eintreffen, das Verfolgen einer optimalen Politik, die eine Annahme der Produktanfrage $j=3$ ermöglicht. Tabelle \ref{Tab9} zeigt zusammenfassend die berechneten Erwartungswerte und die optimale Politik für alle Systemzustände des Beispiels.

\begin{table}
\begin{footnotesize}
     \caption{Optimale Politik für das beispielhafte Netzwerk RM unter Beachtung der Möglichkeit der Auftragsannahme- und Lagerhaltungsentscheidung} \label{Tab9}
    \vspace*{3mm}
        \begin{center}
\csvautotabular{data/beispiel9.csv}
      \end{center}
    \begin{center}
      %{\footnotesize \textbf{Legende:} LE='Lagerentnahme', LP='Lagerproduktion', KA='Kein Auftrag'} 
      \end{center}
\end{footnotesize}
\end{table}

Die eigentliche Funktionsweise des hier vorgestellten Modells geht anhand des vorher aufgeführten Beispiels jedoch teilweise verloren, da die Anzahl an Buchungsperioden $t\in T$ der Anzahl der möglichen Buchungsabschnitte $\hat{t}\in\hat{T}$ gleich ist. Zur besseren Veranschaulichung wird ein umfangreicheres Beispiel berechnet:

{\begin{center}
$j = \{1, 2, 3, 4\}, \; h = \{1\}, \; r_{1} = 100, \; r_{2} = 5000, \; r_{3} = 100, \; r_{4} = 5000,$ \\
$\text{Startperiode } t=10, \; \text{Anzahl Leistungserstellungen } \hat{T}= 3  $,
\[\textbf{c}^{\hat{t}}=\begin{pmatrix} 1\\ 1  \end{pmatrix}, \;
    \textbf{a}^{\hat t}_1=\begin{pmatrix} 1\\ 0  \end{pmatrix}, \;
\textbf{a}^{\hat t}_2=\begin{pmatrix} 1\\ 0  \end{pmatrix}, \;
\textbf{a}^{\hat t}_3=\begin{pmatrix} 0\\ 1  \end{pmatrix}, \;
\textbf{a}^{\hat t}_4=\begin{pmatrix} 0\\ 1  \end{pmatrix}, \]
         \[ p_{j}(t)=
       \begin{pmatrix}
       0.2 & 0.2 & 0.2 & 0.2 & 0.2 & 0 & 0 & 0 & 0 & 0\\
       0.2 & 0.2 & 0.2 & 0.2 & 0.2 & 0 & 0 & 0 & 0 & 0\\
       0.2 & 0.2 & 0.2 & 0.2 & 0.2 & 0.2 & 0.2 & 0.2 & 0.2 & 0.2\\
       0.2 & 0.2 & 0.2 & 0.2 & 0.2 & 0.2 & 0.2 & 0.2 & 0.2 & 0.2
\end{pmatrix}, 
  \]
  \[
    \textbf{y}^{\hat t}= \begin{pmatrix} 0\\ 0\end{pmatrix}, \;
    \textbf{y}^{\hat t, max}=\begin{pmatrix} 1\\ 1  \end{pmatrix}
      \]
\end{center}}

Für dieses Beispiel ist eine grafische Auswertung unter Beachtung der Parameter und der Menge an möglichen Systemübergängen nicht mehr zielführend. Eine Auswertung der optimalen Politik anhand einer tabellarischen Auswertung ist jedoch weiterhin möglich, wie Tabelle \ref{Tab10} zeigt. Die Tabelle zeigt die jeweiligen Erwartungswerte und die optimalen Politik für jeden Systemzustand. Dabei wird in diesem Beispiel ein Systemzustand als Zahlenfolge $[c_1^{\hat t=1}\;c_1^{\hat t=2}\;y_1^{\hat t=1}\;y_1^{\hat t=2}\;t]$ definiert.

\begin{table}
\begin{footnotesize}
     \caption{Optimale Politik für das zweite beispielhafte Netzwerk RM unter Beachtung der Möglichkeit der Auftragsannahme- und Lagerhaltungsentscheidung} \label{Tab10}
    \vspace*{3mm}
        \begin{center}
\csvautotabular{data/beispiel10.csv}
      \end{center}
    \begin{center}
      %{\footnotesize \textbf{Legende:} LE='Lagerentnahme', LP='Lagerproduktion', KA='Kein Auftrag'} 
      \end{center}
\end{footnotesize}
\end{table}

Wie aus der Tabelle \ref{Tab10} zu erkennen ist, ermittelt der Algorithmus keine optimale Politik der Instandsetzung von Lagerbeständen für die Aufträge $j=3$ und $j=4$. Dies liegt daran, dass die Bereitstellung des aufgewerteten Lagerbestands erst außerhalb des Buchungshorizonts $T$ verfügbar ist. Es liegt eine Dominanz der Annahmen von $j=2$ bzw. $j=4$ für das gesamte Netzwerk vor, sofern die Wahrscheinlichkeit des Auftragseingangs besteht. Zur den anfänglichen Buchungsperiode gehört die Annahme der ertragsarmen Anfragen $j=1$ und $j=3$ nicht zur optimalen Politik. Jedoch könnte die Kapazität $c_{h}^{\hat t}$ der Produktanfrage $j=1$ genutzt werden, damit ein Lagerbestand $y_{h}^{\hat t}$ über die Ressource $h$ generiert wird. Die Kapazität wäre demnach nach dem Leistungserstellungszeitpunkt $\hat{t}=1$ verfügbar. Erfolgt zum Zeitpunkt $t=10$ der Auftragseingang von $j=1$, dann ist eine Annahme über die Kapazitäten jedoch nicht die optimale Politik, sonder die komplette Ablehnung des Auftrags. D. h. der Kapazitätsverbrauch $\textbf{a}^{\hat t}_j$ der Anfrage $j$ wird nicht aufgewendet um den Lagerbestand $\textbf y^{\hat t}$ um $Y(\textbf{a}^{\hat t}_j)$ zu erhöhen. Die Entscheidung über eine Lagerproduktion, die aufgrund des Eingangs einer Produktanfrage $j=1$ getätigt werden kann, erfolgt erst ab der Periode $t=7$. Für das Netzwerk wandeln sich ab diesem Zeitpunkt die OK in der Form, dass eine Übertragung der Kapazität bzgl. der Zielvorgabe der Maximierung des zu erwartenden Gesamtertrags sinnvoller ist. Damit wäre ein Lagerbestand für weitere Produktanfragen $j=2$ (und $j=4$) möglich und die Kapazität $c_{h}^{\hat t}$ aus $\hat{t}=1$ wäre aufgrund des ablaufenden Buchungshorizonts weiterhin verfügbar.

Sofern keine Anfragen in dem Beispiel eintreffen, ergibt sich ein differenziertes Bild bzgl. der optimalen Politik. Sofern Kapazitäten die $c_{h}^{\hat t}$ zu den Zeitpunkten $t<5$ vollständig verfügbar sind, wird keine Lagerproduktion durchgeführt. Das Modell versucht weiter den Ertrag durch die möglichen Erträge $r_j$ der Produktnachfragen $j=2$ und $j=4$ zu maximieren. Sofern jedoch in diesem Zeitabschnitt eine Anfrage nach dem Produkt $j=2$ oder $j=4$ eingetroffen und dementsprechend die Kapazität reduziert ist, wird das Modell die Kapazität $c_{h}^{\hat t=1}=1$ zum Lagerbestand $y_{h}^{\hat t=1}$ umschichten. Dies erfolgt mit dem Bestandveränderungsparameter $\textbf{a}_j^{\hat t}$ für $j=1$ und nur dann, wenn keine Anfrage nach den Produkten $j\in\mathcal{J}$ in den Zeitpunkten $t>5$ eintreffen. Damit folgt die optimale Politik $d_{0}({\textbf{c}^{\hat t},\textbf{y}^{\hat t}, t})$ der optimalen Politik $d_{j}({\textbf{c}^{\hat t},\textbf{y}^{\hat t}, t})$.


%Da der jeweilige Kapazitätsverbrauch $\textbf{a}_j$ und der Ertrag $r_j$ jeweils für zwei Typen von Anfragen $j$ für beide Leistungserstellungszeitpunkte $\hat j$ identisch sind, ist eine Erweiterung des Lagerbestands zwar Bestandteil der optimalen Politik (zumindest für Produktanfragen $j=1$), aber 

\section{Grundlegendes zum Lösen und Implementieren des Auftragsannahmeproblems}\label{Implementierung}

Gleichung \eqref{time} zeigt die mathematische Modellformulierung für das Auftragsannahmeproblem im Netzwerk RM mit Lagerhaltungsentscheidung. In diesem Abschnitt wird ein mögliches Lösungsverfahren für das Optimierungsmodell gezeigt, damit eine Implementierung in ein Computersystem möglich ist. Mittels einer solchen Implementierung kann das exakte Lösen von vordefinierten Szenarien erfolgen. Bei der Implementierung wird in dieser Arbeit das Grundmodell mit neuen Parametern einer möglichen Lagerhaltungsentscheidung bei der Annahme von Kundenaufträgen ergänzt. Zum einen soll eine Verdeutlichung der Funktionsweise der Modellerweiterung der \textit{Bellman'sche Funktionsgleichung} erfolgen und zum anderen wird das vorgestellte Lösungsverfahren für eine numerische Untersuchung benötigt.

Bei der \textit{Bellman'sche Funktionsgleichung} \eqref{DP} aus Abschnitt \ref{Grundmodell} handelt es um ein stochastisch, dynamisches Optimierungsproblem in rekursiver Form.\footnote{Vgl. ???, S. ???} Das Optimierungsmodell besteht aus verschiedenen gleichartigen Teilproblemen und zur Lösung des gesamten Optimierungsmodells müssen alle Teilprobleme gelöst werden.\footnote{Vgl. ???, S. ???} Zur Lösung solcher rekursiven Modellformulierung wird auf das vom amerikanischen Mathematiker Richard Bellman entwickelte Konzept der \textbf{Dynamischen Programmierung (DP)} zurückgegriffen.\footnote{Vgl. ???, S. ???} Bei diesem Konzept werden die berechneten Teilergebnisse gespeichert und bei der weiteren Berechnung des Optimierungsmodells verwendet.\footnote{Vgl. ???, S. ???} Durch eine solche Implementierung wird die rekursive Berechnung des Modells verbessert, da der Zugriff auf bereits berechnete Teilergebnisse erfolgt und nicht einer Neuberechnung durchgeführt wird.

Eine Form der Implementierung des Konzepts der DP ist das Anwenden einer \textit{Memofunktion}. Mit der Memofunktion werden die bereits berechneten Lösungen des Optimierungsmodells gespeichert. Sofern die rekursive Folge auf ein bereits berechnetes Teilproblem stößt, wird auf die abgespeicherte Lösung zurückgegriffen.\footnote{Vgl. ???, S. ?} Das stochastisch, dynamisches Optimierungsmodell lässt sich Graph interpretieren, bei dem die Knoten die Teilprobleme und die Kanten die einzelnen Übergängen in die nachfolgenden Teilprobleme sind. Zur Verdeutlichung einer Memofunktion im Netzwerk RM in der Auftragsannahme wird ein einfaches Beispiel eingeführt: $j = \{1, 2\}, \; h = \{1\}, \; \text{Startperiode } t=2, c_{1}=2, a_{11}=1, a_{12}=1.$

\begin{figure}[h!]
  \begin{center}
    \includegraphics[width=140mm]{Bilder/Einfach.pdf}
    \caption{Rekursive Übergänge der Systemzustände ohne Memofunktion}  \label{Einfach}
        {\footnotesize \textbf{Quelle:} ????} 
    {\footnotesize \textbf{Legende:} Annahme einer Produktauftrag entspricht '$j$', KA='Kein Auftrag'} 
  \end{center}
\end{figure}

Abbildung \ref{Einfach} zeigt die möglichen Systemzustände in Form der Knoten und Übergänge in Form der Kanten. Dabei ist ein Knoten definiert als Zahlenfolge $[c_h\; t]$ und zeigt damit den Kapazitätsbestand $c_h$ zum Zeitpunkt $t$. Durch Annahme einer Produktanfrage $j\in\mathcal{J}$ oder sofern keine Anfrage eintrifft, wird ein Systemzustand verlassen. Diese rekursive Folge des Graphen wird konstruiert durch Anwenden der Gleichung \eqref{DP}. Sofern keine Memofunktion Anwendung findet, werden die einzelnen Teilprobleme jeweils mehrfach ermittelt, da sie jeweils für das vorherige Teilproblem notwendig sind.

\begin{figure}[h!]
  \begin{center}
    \includegraphics[width=50mm]{Bilder/Einfach2.pdf}
    \caption{Rekursive Übergänge mit Memofunktion}  \label{Einfach2}
        {\footnotesize \textbf{Quelle:} ????} 
    {\footnotesize \textbf{Legende:} Annahme einer Produktauftrag entspricht '$j$', KA='Kein Auftrag'} 
  \end{center}
\end{figure}

Durch Anwenden einer Memofunktion können die möglichen Übergänge der Systemzustände des Beispiels reduziert werden, wie Abbildung \ref{Einfach2} zeigt. Jedes Systemzustand ist nur einmal im Zustandsraum vorhanden und sofern der rekursive Verlauf auf ein bereits ermitteltes Teilproblem trifft, erfolgt das Abrufen der bereits gespeicherten Lösung. Anders formuliert bedeutet dies, dass nachdem der Systemzustand bzw. das Teilproblem $[1\; 1]$ aufgrund der Anfrage nach Produkt $j=1$ gelöst ist, die Berechnung des gleichen Systemzustands $[1\; 1]$ aufgrund der Anfrage nach Produkt $j=2$ nicht mehr notwendig ist. Das Ergebnis des Teilproblems wird direkt aus der Memofunktion abgerufen.

Der in dieser Arbeit verwendete \textbf{Algorithmus} zum exakten Lösen des Auftragsannahmeproblems im Netzwerk RM verwendet eine solche Memofunktion. Der Algorithmus berechnet den Erwartungswert des maximal möglichen Ertrags für ein Netzwerk RM auf Basis der rekursiven Form der Gleichung \eqref{time2}. Er durchläuft alle möglichen Teilprobleme bzw. Systemzustände des Netzwerks, indem der Algorithmus sich selbst mit angepassten Parametern aufruft. Als Grenzen für die rekursive Abfolge werden die Grenzbedingungen \eqref{GB1}, \eqref{GB2} und \eqref{GB3} hinterlegt. Sofern eine dieser Grenzen erreicht ist bzw. die Lösungen für die notwendigen nachfolgenden Teilprobleme vorhanden sind, kann das Teilproblem gelöst werden. Somit erfolgt das Lösen des Optimierungsproblems durch Rückwärtsinduktion der rekursiven Folge, wobei bei jedem Teilproblem geprüft wird, ob bereits eine Lösung in der Memofunktion vorliegt. Nachfolgend wird der verwendete Algorithmus als Pseudocode dargestellt.

\begin{algorithm}[H]
\textbf{Pseudocode: Auftragsannahmeproblem im Netzwerk RM;\\ 
Ermittlung des Erwartungswerts $V(\textbf{c},t)$}\\
\Ein{$Memofunktion$}
\Ein{$\mathcal{H}$, $\mathcal{J}$, $T$, $\hat T$, $\textbf{c}^{\hat t}$, $\textbf{y}^{\hat t}$, $\textbf{a}^{\hat t}_j$, $r_{j}$, $p_j(t)$}
\uWenn{$V(\textnormal{\textbf c}^{\hat t},\textnormal{\textbf y}^{\hat t},t) \notin Memofunktion$}{
	\uWenn{$t \neq 0$}{
		$value^{reject} = V(\textbf{c}^{\hat t},\textbf{y}^{\hat t},t-1)$\\
		\FuerJedes{$j\in\mathcal{J}$}{
		% Accept
			\uWenn{$\textnormal{\textbf c}^{\hat t}-\textnormal{\textbf a}_j^{\hat t}\ge \textnormal{\textbf{0}}$}{
				$value_{j}^{accept} = p_j(t)\cdot\max[0,r_{j}-value^{reject}+V(\textnormal{\textbf c}^{\hat t}-\textnormal{\textbf a}^{\hat t}_j,\textbf{y}^{\hat t},t-1)]$}
			\uSonst{Grenzbedingung \eqref{GB2}: $V(\textnormal{\textbf c}^{\hat t}-\textnormal{\textbf a}^{\hat t}_j,\textbf{y}^{\hat t},t-1)=-\infty$\\
			$value_{j}^{accept} = p_j(t)\cdot\max[0,r_{j}-value^{reject}-\infty]$}
			% 2
			\uWenn{$\textnormal{\textbf y}^{\hat t}-\textnormal{\textbf a}_j^{\hat t}\ge \textnormal{\textbf{0}}$}{
				$value_{j}^{storage} = p_j(t)\cdot\max[0,r_{j}-value^{reject}+V(\textnormal{\textbf c}^{\hat t},\textbf{y}^{\hat t}-\textnormal{\textbf a}^{\hat t}_j,t-1)]$}
			\uSonst{Grenzbedingung \eqref{GB2}: $V(\textnormal{\textbf c}^{\hat t},\textbf{y}^{\hat t}-\textnormal{\textbf a}^{\hat t}_j,t-1)=-\infty$\\
			$value_{j}^{storage} = p_j(t)\cdot\max[0,r_{j}-value^{reject}-\infty]$}
				% 3
			\uWenn{$\textnormal{\textbf c}^{\hat t}-\textnormal{\textbf a}_j^{\hat t}\ge \textnormal{\textbf{0}} \textnormal{\textbf{ and }} \textnormal{\textbf y}^{\hat t}+Y(\textnormal{\textbf a}_j^{\hat t})\le \textnormal{\textbf{y}}^{\hat t, max}$}{
				$value_{j}^{workup} = p_j(t)\cdot\max[0,V(\textnormal{\textbf c}^{\hat t}-\textnormal{\textbf a}^{\hat t}_j,\textbf{y}^{\hat t}+Y(\textnormal{\textbf a}_j^{\hat t}),t-1)-value^{reject}]$}
			\uSonst{Grenzbedingung \eqref{GB2}: $V(\textnormal{\textbf c}^{\hat t}-\textnormal{\textbf a}^{\hat t}_j,\textbf{y}^{\hat t}+Y(\textnormal{\textbf a}_j^{\hat t}),t-1)=-\infty$\\
			$value_{j}^{workup} = p_j(t)\cdot\max[0,-\infty-value^{reject}]$}
			
			}
			
		$V(\textbf{c}^{\hat t},\textbf{y}^{\hat t},t)=value^{reject} + \sum_{j\in\mathcal{J}}(value_j^{accept}+value_j^{storage}+value_j^{workup})+p_0(t)\max_{\substack{j\in \mathcal{J},\\ p_j(t)>0}}[0, V(\textnormal{\textbf c}^{\hat t}-\textnormal{\textbf a}^{\hat t}_j,\textbf{y}^{\hat t}+Y(\textnormal{\textbf a}_j^{\hat t}),t-1)]$}
	\uSonst{Grenzbedingung \eqref{GB1}: $V(\textbf{c}^{\hat t},\textbf{y}^{\hat t},t)=0$}
	$Memofunktion = Memofunktion+V(\textbf{c}^{\hat t},\textbf{y}^{\hat t},t)$}
\lSonst{$V(\textbf{c}^{\hat t},\textbf{y}^{\hat t},t) \textbf{ aus } Memofunktion$}
\Aus{$V(\textbf{c}^{\hat t},\textbf{y}^{\hat t},t)$}
%{\footnotesize \textbf{Quelle:} \cite{bouleimen2003new}, S. 273}
\end{algorithm}

Zur Implementierung des Algorithmus zum Lösen des Grundmodells des Auftragsannahmeproblems im Netzwerk RM wird die Programmiersprache \texttt{Python/2.7.1} verwendet. Es handelt sich um eine höhere Programmiersprache mit einem Interpreter.\footnote{Vgl. ???, S. ??} Als  Kommandozeileninterpreter wird \texttt{IPython/3.2.1} genutzt. Zur Verbesserung der Laufzeit der Implementierung wird auf die Programmbibliothek \texttt{NumPy/}\texttt{1.9.2} zurückgegriffen. Mit dieser Programmbibliothek ist es möglich multidimensionale Datenstrukturen zu formen und mit den integrierten numerischen Algorithmen sowie mathematischen Werkzeugen zu bearbeiten.\footnote{Vgl. ???, S. ???} Dabei ist \texttt{NumPy/} \texttt{1.9.2} ein Bestandteil von \texttt{SciPy/0.15.1}.\footnote{Vgl. ???, S. ??} Die Laufzeitverbesserung kommt zu Stande, da die Funktionen der Programmbibliothek hauptsächlich in der Programmiersprache \texttt{C} geschrieben sind.\footnote{Vgl. ???, S. ??} Zusätzlich wird die Programmbibliothek \texttt{NetworkX/1.9.1} verwendet, um die ermittelten Erwartungswerte in eine Netzwerkdatenstruktur zu überführen. Diese Netzwerkdatenstruktur ist explizit für Multigraphen geeignet, was für diese Problemstellung notwendig ist. Die Teilprobleme werden miteinander in Beziehung gesetzt, indem ein Teilproblem ein Knoten bildet und die für das Teilproblem notwendigen nachfolgenden Teilprobleme die Kanten der Netzwerkdatenstruktur bilden. Dadurch wird das Optimierungsproblem als Netzwerk interpretierbar. Weiter kann dieser Netzwerkdatenstruktur grafisch expotiert werden, indem eine für das Programm \texttt{GraphViz/2.38.0} verwertbare Datei erzeugt wird. Dadurch ist das Rendern der jeweiligen Netzwerkdatenstruktur möglich. Sämtliche in dieser Arbeit abgebildeten Graphen sind mit dem Programm \texttt{GraphViz/2.38.0} erstellt. Zusätzlich erfolgt die Verwaltung der Daten durch die Datenanalyse-Programmbibliothek \texttt{Pandas/0.16.2}. Nachfolgend wird das Grundmodell auf Basis der \textit{Bellman'schen Funktionsgleichung} mit der Lagerhaltungsentscheidung erweitert und der hier aufgeführte Algorithmus mit den aufgeführten Erweiterungen umgeformt. Im Anschluss dieses Kapitels erfolgt die abschließende numerische Untersuchung von Szenarien....

%Das Optimierungsmodell verwendet eine parallele Programmierung, womit die Laufzeit jedoch nur im geringen Maße verbessert wird. Dieser Sachverhalt und die numerische Untersuchung des Algorithmus für die Auftragsannahme von auftragsbezogenen Instandhaltungsprozessen anhand von Szenarien sind im Abschnitt \ref{Untersuchung} aufgeführt. Im Vorfeld muss jedoch die Erweiterung des Grundmodells um das Entscheidungsproblem der Instandhaltung von Produkten erfolgen. Dies wird im nachfolgenden Abschnitt \ref{Umformung} durchgeführt.




